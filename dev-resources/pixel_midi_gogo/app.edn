(->TodoItem "Hello, world!")
(->Def :input-value "")

:select
[Event [{{:keys [id]} :data, opts :options}] (= id :input) (= opts ?opts)]
:insert
(->Def :input-value (-> ?opts :target .-value))

:select
[Event [{{:keys [id]} :data, opts :options}] (= id :btn) (= opts ?opts)]
[?input <- Def (= id :input-value)]
:insert
(->TodoItem (:value ?input))

:select
[?items <- (all) :from [TodoItem]]
[?input <- Def (= id :input-value)]
:insert
(->View "#app"
  [:div
   [:input {:value (:value ?input)
            :on-change {:id :input}}]
   [:button {:on-click {:id :btn}}
    "Add item"]
   (into [:ul]
     (for [item ?items]
       [:li (:text item)
        [:button {:on-click item} "Remove item"]]))])

